<!doctype html>
<html lang="en">
<head>
<title>My Bulletin</title>
<meta charset="UTF-8">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<!--<link rel="icon" sizes="152x152" href="/static/touch-icon-ipad-retina-152x152.png">
<link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="icon" href="/static/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="static/touch-icon-iphone-60x60.png">
<link rel="apple-touch-icon" sizes="76x76" href="static/touch-icon-ipad-76x76.png">
<link rel="apple-touch-icon" sizes="120x120" href="static/touch-icon-iphone-retina-120x120.png">
<link rel="apple-touch-icon" sizes="152x152" href="static/touch-icon-ipad-retina-152x152.png">-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="jqm/jquery.mobile.icons-1.4.5.min.css" />
<link rel="stylesheet" href="jqm/jquery.mobile.structure-1.4.5.min.css" />
<link rel="stylesheet" href="jqm/jquery.mobile.theme-1.4.5.min.css" />
<style type="text/css">
img {
	max-width: 100%;
}
span.contact {
    display: block;
    font-size: 85%;
	font-weight: bold;
}
span.date {
    float: right;
}
.ui-icon-book:after {
	background-image: url("images/icons/book.svg");
}
/* Fallback */
.ui-nosvg .ui-icon-book:after {
	background-image: url("images/icons/book.png");
}
ul.service {
    font-weight: bold;
}
span.title {
    display: block;
    margin-bottom: 10px;
}
.service span.song {
    text-align: right;
	display: block;
}
.service span.performer {
    text-align: right;
	display: block;
    font-size: 85%;
    font-weight: normal;
}
html body a.ui-btn {
	white-space: normal;
}
#message ol li ol {
	list-style-type:upper-alpha;
}
</style>
<script src="js/jquery-2.1.4.min.js"></script> 
<script>
$(document).bind('mobileinit',function(){
    $.mobile.changePage.defaults.changeHash = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
});
</script>
<script src="jqm/jquery.mobile-1.4.5.min.js"></script>
<script>
$( document ).on( "pagecreate", ".homePage", function() {
    
    $( document ).on( "swipeleft", ".ui-page", function( event ) {
        var next = $( this ).next().attr("id");
        $.mobile.changePage( "#"+next, { transition: "slide", changeHash: true });
    });
    
    $( document ).on( "swiperight", ".ui-page", function( event ) {
        var next = $( this ).prev().attr("id");
        $.mobile.changePage( "#"+next, { transition: "slide", reverse: true, changeHash: true });
    });
    
});
$(function() {
    $( "[data-role='navbar']" ).navbar();
    $( "[data-role='header'], [data-role='footer']" ).toolbar();
});
// Update the contents of the toolbars
$( document ).on( "pagecontainerchange", function() {
    // Each of the four pages in this demo has a data-title attribute
    // which value is equal to the text of the nav button
    // For example, on first page: <div data-role="page" data-title="Info">
    var current = $( ".ui-page-active" ).jqmData( "title" );
    // Change the heading
    $( "[data-role='header'] h1" ).text( current );
    // Remove active class from nav buttons
    $( "[data-role='navbar'] a.ui-btn-active" ).removeClass( "ui-btn-active" );
    // Add active class to current nav button
    $( "[data-role='navbar'] a" ).each(function() {
        if ( $( this ).text() === current )
		{
            $( this ).addClass( "ui-btn-active" );
        }
    });
});
var content = {
    "welcome": [
        {
            "container": ".welcomeHeader",
            "content": "Welcome to Olive!"
        },
        {
            "container": ".welcomeParagraph",
            "content": "Hurricane Ivan changed Pensacola, changed Olive, and changed me. It was after that storm that our ministry in the community rose to a new level. The Ministry Village at Olive was born. Our engagement with Northwest Florida in compassion ministry has always been a part of our church. But that heartbeat simply became stronger after the storm."
        }
    ],
    "events": {
        "container": "#events .ui-content",
        "repeating": "true",
        "content": [
            {
                "date": "10/14",
                "title": "Identify &amp; Use Your Spiritual Gifts",
                "contact": "Huey Pearson",
                "email": "hpearson@olivebaptist.org",
                "content": "In Christianity, spiritual gifts are endowments which may be given by the Holy Spirit. Join us to find yours! Class begins Wednesday, October 14 at 6pm in Room 5107."
            },
            {
                "date": "10/25",
                "title": "Discovering Olive",
                "contact": "Beth Harris",
                "email": "bharris@olivebaptist.org",
                "content": "Have you Recently Joined Olive? A prospective member? Then join us Sunday, October 25 at 5:30pm in the Passmore Hall. You'll enjoy a delicious meal and hear Pastor's vision for our church. Reserve your spot by contacting Beth Harris."
            }
        ]
    },
	"service": {
        "container": "#service ul.service",
        "content": [
            {
                "divider": true,
                "title": "Sunday Morning"
            },
            {
                "title": "Prelude",
                "song": "Everlasting God",
                "performer": "Orchestra"
            },
            {
                "title": "Call to Worship",
                "song": "I Sing the Mighty Power of God</br>A Mighty Fortress Is Our God"
            },
            {
                "title": "Welcome",
                "performer": "Pastor"
            },
            {
                "title": "Praise &amp; Worship",
                "song": "Hosanna (Praise Is Rising)</br>Cornerstone"
            },
            {
                "title": "Offeratory Prayer",
                "performer": "Pastor"
            },
            {
                "title": "Offeratory Praise",
				"song": "God of This City",
                "performer": "Choir &amp; Orchestra</br>Jenny Thompson, solo"
            },
            {
                "title": "Message",
                "performer": "Pastor"
            },
            {
                "title": "Hymn of Invitation"
            }
        ]
    },
	"message": {
        "container": "#message .ui-content",
		"title": "I Love My Community",
		"notesContainer": "#message .messageNotes",
        "notes": [
            {
                "title": "The City of Nazareth (v.16)",
				"content": "Boyhood home of Jesus"
            },
            {
                "title": "The City of Capernaum (v.31)",
                "content": "Base of Operations for Jesus"
            },
            {
                "title": "The City of Pensacola",
                "content": "<ol><li>Our Message in the City</li><li>Our Ministry in the City</li><li>Our Methods in the City<ol><li>Spiritual Battles in the __________</li><li>Spiritual Battles in the __________</li><li>Spiritual Battles in the __________</li><li>Spiritual Battles in the __________</li></ol></li></ol>"
            }
        ]
    }
	
};
</script>
</head>
<body>
<div data-role="header" data-position="fixed" data-id="header" data-theme="a">
    <h1>Welcome</h1>
</div>
<div data-role="footer" data-id="footer" data-position="fixed" data-theme="a">
    <div data-role="navbar" data-theme="a">
        <ul>
            <li><a href="#welcome" id="Welcome" data-icon="home" data-transition="fade">Welcome</a></li>
            <li><a href="#events" id="Events" data-icon="comment" data-transition="fade">Events</a></li>
            <li><a href="#service" id="Service" data-icon="bullets" data-transition="fade">Service</a></li>
            <li><a href="#message" id="Message" data-icon="book" data-transition="fade">Message</a></li>
        </ul>
    </div>
</div>
<div data-role="page" id='welcome' class="homePage" data-theme='a' data-title="Welcome">
    
    <div data-role="main" class="ui-content">
        <div class="headContent">
            <img src="images/OCC.JPG" alt="Operation Christmas Child"/>
        </div>
        <div class="welcomeContent">
            <h2 class="welcomeHeader"></h2>
            <p class="welcomeParagraph"></p>
        </div>
        <div class="footContent">
        </div>
    </div>
    
</div>

<div data-role="page" id="events" data-theme="a" data-title="Events">
    <div data-role="main" class="ui-content">
    </div>
    
</div>

<div data-role="page" id="service" data-theme="a" data-title="Service">
    <div data-role="main" class="ui-content">
        <ul data-role="listview" class="service" data-inset="true" data-divider-theme="b">
        	
        </ul>
    </div>
  
</div>

<div data-role="page" id="message" data-theme="a" data-title="Message">
    <div data-role="main" class="ui-content">
    	<div class="messageNotes" data-role="collapsibleset" data-theme="a" data-content-theme="a">
    	</div>
    </div>
</div>
  
</div>

<script>
	$.ajax({
	  dataType: "json",
	  url: "http://erichigdon.com/DigitalBulletin/php/data.php",
	  success: function(content) {
		//get welcome content
		$.each(content.welcome, function() {
			$(this.container).html(this.content);
		});
		//get event content
		$.each(content.events.content, function() {
			var announcement = '<div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u"><h4><span class="date">'+this.date+'</span><span class="announcementTitle">'+this.title+'</span></h4><span class="contact">Contact: '+this.contact+' (<a href="mailto:'+this.email+'">'+this.email+'</a>)</span><p class="announcementContent">'+this.content+'</p></div>';
			$(content.events.container).append(announcement);
		});
		//get service content
		$.each(content.service.content, function() {
			if(this.divider)
				var serviceItem = '<li data-role="list-divider">'+this.title+'</li>';
			else
			{
				var serviceItem = '<li>';
				if(this.title)
					serviceItem += '<span class="title">'+this.title+'</span>';
				if(this.song)
					serviceItem += '<span class="song">'+this.song+'</span>';
				if(this.performer)
					serviceItem += '<span class="performer">'+this.performer+'</span>';
				serviceItem += '</li>'
			}
			$(content.service.container).append(serviceItem);
		});
		//get message content
		$(content.message.container).prepend('<h2>'+content.message.title+'</h2>');
		$.each(content.message.notes, function() {
			var note = '<div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u"><h3>'+this.title+'</h3><p>'+this.content+'</p></div>';
			$(content.message.notesContainer).append(note);
		});
	  }
	});
	
</script>
</body>
</html>